name: xp-cloudflared-tunnel
on:
  workflow_dispatch:
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Install XP
        run: |
          sudo wget -O install.sh https://download.xp.cn/install.sh
          sudo bash install.sh
      - name: Install Cloudflare Tunnel
        run: |
          curl -L --output cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb && 
          sudo dpkg -i cloudflared.deb && 
          sudo cloudflared service install ${{ secrets.XP_TOKEN }}
      - name: Keep Action
        run: tail -f /var/log/alternatives.log
